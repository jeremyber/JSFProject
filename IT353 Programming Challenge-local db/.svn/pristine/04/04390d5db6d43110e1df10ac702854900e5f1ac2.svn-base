package controller;

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

import DAO.ScheduleDAO;
import java.io.Serializable;
import java.util.ArrayList;
import javax.enterprise.context.SessionScoped;
import javax.inject.Named;

/**
 *
 * @author it3530103
 */
@Named(value = "times")
@SessionScoped
public class ScheduleController implements Serializable{

    private String presentAvailableTimes = "";
    private String timeSelected="";
    private String groupName="";
    ArrayList<Boolean> availableTimes = new ArrayList<Boolean>();
    private String errorCode="";
    
    public ScheduleController() 
    {
        availableTimes = ScheduleDAO.findAvailableTimes();
       presentTimes();
    }
    
    public void presentTimes()
    {
        presentAvailableTimes="";
   
                if(availableTimes.get(0)==true)
                  presentAvailableTimes+="1) 2:00 to 2:10 p.m<br/>";
                if(availableTimes.get(1)==true)
                  presentAvailableTimes+="2) 2:10 to 2:20 p.m<br/>";
                if(availableTimes.get(2)==true)
                  presentAvailableTimes+="3) 2:20 to 2:30 p.m<br/>";
                if(availableTimes.get(3)==true)
                  presentAvailableTimes+="4) 2:30 to 2:40 p.m<br/>";
    
    }

    public String removeTimes()
    {
        
        setErrorCode("");
        int selected=-1;
        try
        {
             selected = Integer.parseInt(timeSelected) - 1;
        }
        catch(NumberFormatException e)
        {
            setErrorCode("That is not a number!");
        }
                
                
        if(selected<0 || selected > availableTimes.size())
            setErrorCode("That time is not available!");
        else if(availableTimes.get(selected).booleanValue() == true)
        {
            String timeToRemove = "";
             if(selected==0)
                 timeToRemove = "2:00 to 2:10 p.m.";
             else if(selected==1)
                 timeToRemove = "2:10 to 2:20 p.m.";
             else if(selected==2)
                 timeToRemove = "2:20 to 2:30 p.m.";
             else
                 timeToRemove = "2:30 to 2:40 p.m.";
             ScheduleDAO.removeTime(timeToRemove, groupName);
             
         
             
        }
           
        else
         setErrorCode("That time is not available!");
        availableTimes = ScheduleDAO.findAvailableTimes();
        presentTimes();
       return "index?faces-redirect=true";
            
    }
    
    public String getPresentAvailableTimes() {
        return presentAvailableTimes;
    }

    public void setPresentAvailableTimes(String presentAvailableTimes) {
        this.presentAvailableTimes = presentAvailableTimes;
    }

   

    public String getTimeSelected() {
        return timeSelected;
    }

    public void setTimeSelected(String timeSelected) {
        this.timeSelected = timeSelected;
    }

    public String getGroupName() {
        return groupName;
    }

    public void setGroupName(String groupName) {
        this.groupName = groupName;
    }

    public String getErrorCode() {
        return errorCode;
    }

    public void setErrorCode(String errorCode) {
        this.errorCode = errorCode;
    }
}
